--
-- Structure of TSO
--
SELECT
BIN(454310362294255617) AS TSO,
BIN(454310362294255617 >> 18) AS PHY_TS,
LPAD(BIN(454310362294255617 & 0x3FFFF), 18, 0) AS LOG_TS \G

--
-- Convert TSO to timestamp
--
SELECT FROM_UNIXTIME((454310362294255617 >> 18) / 1000);

--
-- Convert TSO by using TIDB_PARSE_TSO and TIDB_PARSE_TSO_LOGICAL
--
SELECT
TIDB_PARSE_TSO(454310362294255617),
TIDB_PARSE_TSO_LOGICAL(454310362294255617) \G

--
-- Convert timestamp to TSO
--
SELECT UNIX_TIMESTAMP('2024-12-01 12:34:56.789000') * 1000
SELECT BIN(1733056496789.000000);
SELECT LPAD(BIN(1), 18, 0);
SELECT CONV(
  CONCAT("11001001110000010001101111000010010010101", "000000000000000001"), 2, 10
) AS TSO;

